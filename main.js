!function(){"use strict";var e=class{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputList=[],this._buttonElement}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){this._errorElement=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorElement.classList.remove(this._errorClass),this._errorElement.textContent=""}_toggleInputError(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}disableSubmitButton(){this._buttonElement.disabled=!0,this._buttonElement.classList.add(this._inactiveButtonClass)}_enableSubmitButton(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}_toggleButtonState(){this._hasInvalidInput()?this.disableSubmitButton():this._enableSubmitButton()}_setEventListeners(){this._inputList=[...this._form.querySelectorAll(this._inputSelector)],this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._toggleInputError(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class t{constructor(e,t,o){this._text=e.name,this._link=e.link,this._cardSelector=t,this._handleCardClick=o}_setEventListeners(){this._element.querySelector(".card__like-button").addEventListener("click",(()=>this._handleLikeButton())),this._element.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteButton())),this._element.querySelector(".card__image").addEventListener("click",(()=>this._handleCardClick({name:this._text,link:this._link})))}_handleLikeButton(){this._element.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteButton(){this._element.remove(),this._element=null}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".card__image"),t=this._element.querySelector(".card__title");return e.src=this._link,e.alt=this._text,t.textContent=this._text,this._element}}class o{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}openModalWindow(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}closeModalWindow(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.closeModalWindow()};setEventListeners(){this._popupElement.querySelector(".popup__close-button").addEventListener("click",(()=>this.closeModalWindow())),this._popupElement.addEventListener("click",(e=>{e.target.matches(".popup")&&this.closeModalWindow()}))}}class n extends o{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".popup__form"),this._submitCallback=t}_getInputValues(){const e=this._popupForm.querySelectorAll(".popup__input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._popupForm.addEventListener("submit",(()=>{this._submitCallback(this._getInputValues()),this.closeModalWindow()})),super.setEventListeners()}closeModalWindow(){this._popupForm.reset(),super.closeModalWindow()}}document.querySelector(".photo-grid__cards"),document.querySelector(".popup"),document.querySelector(".create-popup");const s=document.querySelector("#profile-popup"),r=document.querySelector("#create-popup"),i=(document.querySelector(".popup__close-button"),document.querySelector(".profile__edit-button")),l=document.querySelector(".profile__add-button"),u=(document.querySelector(".popup__close-edit"),document.querySelector(".popup__close-button"),document.querySelector(".profile__name"),document.querySelector(".profile__title"),document.querySelector(".popup__close-button"),document.querySelector("#preview-popup"),document.querySelector("#title")),a=document.querySelector("#description"),c=(r.querySelector("#name"),r.querySelector("#link"),{inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__button-disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"}),p=new e(c,s),d=new e(c,r);p.enableValidation(),d.enableValidation();const _=new class extends o{openModalWindow(e){let{link:t,name:o}=e;const n=this._popupElement.querySelector(".popup__preview-image"),s=this._popupElement.querySelector(".popup__preview-name");n.src=t,s.alt=o,s.textContent=o,super.openModalWindow()}}({popupSelector:".preview-popup"});_.setEventListeners();const m=e=>new t(e,"#card-template",(e=>{_.openModalWindow(e)})).getView(),h=new class{constructor(e,t){let{items:o,renderer:n}=e;this._items=o,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{const t=this._renderer(e);this.addItem(t)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:m},".photo-grid__cards");h.renderItems();const E=new n("#profile-popup",(e=>{b.setUserInfo(e.title,e.description)})),S=new n("#create-popup",(e=>{const t=m({name:e.name,link:e.link});h.addItem(t)})),b=new class{constructor(e){let{nameSelector:t,jobSelector:o}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(o)}getUserInfo(){return{name:this._nameElement.textContent,description:this._jobElement.textContent}}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}}({nameSelector:".profile__name",jobSelector:".profile__title"});S.setEventListeners(),E.setEventListeners(),l.addEventListener("click",(()=>{S.openModalWindow(),d.disableSubmitButton()})),i.addEventListener("click",(()=>{E.openModalWindow();const e=b.getUserInfo();u.value=e.name,a.value=e.description}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFtQnVDLElBQzNEQyxFQUFZQyxZQUFZRixFQUFZRyxNQUFPSCxFQUFZSSxZQUFZLElBRy9EQyxFQUFlLElBQUk1QyxFQUFjLGlCQUFrQnVDLElBQ3ZELE1BQU1NLEVBQU9yQixFQUFXLENBQUV0RCxLQUFNcUUsRUFBWXJFLEtBQU1FLEtBQU1tRSxFQUFZbkUsT0FDcEVzRCxFQUFlVSxRQUFRUyxFQUFLLElBR3hCTCxFQUFjLElHdERMLE1BQ2J4SCxZQUFXcUUsR0FBZ0MsSUFBL0IsYUFBRXlELEVBQVksWUFBRUMsR0FBYTFELEVBQ3ZDbEUsS0FBSzZILGFBQWVwRSxTQUFTeEMsY0FBYzBHLEdBQzNDM0gsS0FBSzhILFlBQWNyRSxTQUFTeEMsY0FBYzJHLEVBQzVDLENBRUFHLGNBS0UsTUFKaUIsQ0FDZmhGLEtBQU0vQyxLQUFLNkgsYUFBYXhHLFlBQ3hCbUcsWUFBYXhILEtBQUs4SCxZQUFZekcsWUFHbEMsQ0FFQWlHLFlBQVl2RSxFQUFNaUYsR0FDaEJoSSxLQUFLNkgsYUFBYXhHLFlBQWMwQixFQUNoQy9DLEtBQUs4SCxZQUFZekcsWUFBYzJHLENBQ2pDLEdIcUMrQixDQUMvQkwsYUFBYyxpQkFDZEMsWUFBYSxvQkFHZkgsRUFBYS9DLG9CQUNieUMsRUFBZ0J6QyxvQkFFaEJpQixFQUFVckQsaUJBQWlCLFNBQVMsS0FDbENtRixFQUFhcEQsa0JBQ2I0QixFQUFpQmxFLHFCQUFxQixJQUd4QzJELEVBQVdwRCxpQkFBaUIsU0FBUyxLQUNuQzZFLEVBQWdCOUMsa0JBRWhCLE1BQU00RCxFQUFXWixFQUFZVSxjQUM3Qm5DLEVBQWdCTixNQUFRMkMsRUFBU2xGLEtBQ2pDOEMsRUFBc0JQLE1BQVEyQyxFQUFTVCxXQUFXLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSB2YWxpZGF0aW9uQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHZhbGlkYXRpb25Db25maWcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFtdO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLypcclxuRm9yIGVhY2ggaW5wdXQgZWxlbWVudCwgdGhlIGZ1bmN0aW9uIGNoZWNrcyB0aGUgdmFsaWRpdHkgcHJvcGVydHkgb2YgdGhlIGVsZW1lbnQsIHdoaWNoIGlzIGEgYm9vbGVhbiB2YWx1ZSBpbmRpY2F0aW5nIFxyXG53aGV0aGVyIHRoZSBpbnB1dCBpcyB2YWxpZCBhY2NvcmRpbmcgdG8gdGhlIGNvbnN0cmFpbnRzIHNwZWNpZmllZCBpbiB0aGUgZWxlbWVudCdzIGF0dHJpYnV0ZXMgKHN1Y2ggYXMgcmVxdWlyZWQsIG1pbiwgbWF4LCBldGMuKS5cclxuXHJcbklmIGFuIGlucHV0IGVsZW1lbnQgaXMgZm91bmQgdG8gYmUgaW52YWxpZCwgdGhlIHNvbWUgbWV0aG9kIGltbWVkaWF0ZWx5IHJldHVybnMgdHJ1ZSwgaW5kaWNhdGluZyB0aGF0IHRoZXJlIFxyXG5pcyBhdCBsZWFzdCBvbmUgaW52YWxpZCBpbnB1dCBlbGVtZW50IGluIHRoZSBhcnJheS4gT3RoZXJ3aXNlLCBpZiBhbGwgaW5wdXQgZWxlbWVudHMgYXJlIHZhbGlkLCB0aGUgc29tZSBtZXRob2QgcmV0dXJucyBmYWxzZS5cclxuXHJcblNvIHRoZSBmdW5jdGlvbiBoYXNJbnZhbGlkSW5wdXQgcmV0dXJucyB0cnVlIGlmIHRoZXJlIGlzIGF0IGxlYXN0IG9uZSBpbnZhbGlkIGlucHV0IGVsZW1lbnQgaW4gdGhlIGlucHV0IGFycmF5LCBhbmQgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4qL1xyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIGNoYW5nZSB0aGVzZSB0d28gZnVuY3Rpb25zIF9kaXNhYmxlIC4uLiBhbmQgX2VuYWJsZS4uLlxyXG5cclxuICBkaXNhYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZW5hYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcclxuICAgIHRoaXMuX3RleHQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKSk7XHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24oKSk7XHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyBuYW1lOiB0aGlzLl90ZXh0LCBsaW5rOiB0aGlzLl9saW5rIH0pXHJcbiAgICAgICk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgY29uc3QgY2FyZFRleHQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICBjYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl90ZXh0O1xyXG4gICAgY2FyZFRleHQudGV4dENvbnRlbnQgPSB0aGlzLl90ZXh0O1xyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW5Nb2RhbFdpbmRvdygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlTW9kYWxXaW5kb3coKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlTW9kYWxXaW5kb3coKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IHBvcHVwQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLnBvcHVwX19jbG9zZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHBvcHVwQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlTW9kYWxXaW5kb3coKSk7XHJcblxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0Lm1hdGNoZXMoXCIucG9wdXBcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlTW9kYWxXaW5kb3coKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzdWJtaXRDYWxsYmFjaykge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9zdWJtaXRDYWxsYmFjayA9IHN1Ym1pdENhbGxiYWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xyXG4gICAgY29uc3QgaW5wdXRPYmplY3QgPSB7fTtcclxuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dE9iamVjdFtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRPYmplY3Q7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcclxuICAgICAgdGhpcy5fc3VibWl0Q2FsbGJhY2sodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2VNb2RhbFdpbmRvdygpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VNb2RhbFdpbmRvdygpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2VNb2RhbFdpbmRvdygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuZXhwb3J0IGNvbnN0IHBob3RvR3JpZFdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvLWdyaWRfX2NhcmRzXCIpO1xyXG5leHBvcnQgY29uc3QgZWRpdFBvcHVwV2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cFwiKTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBvcHVwV2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jcmVhdGUtcG9wdXBcIik7XHJcbmV4cG9ydCBjb25zdCBlZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1wb3B1cFwiKTtcclxuLy8gZXhwb3J0IGNvbnN0IGVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZWRpdC1jb250YWluZXJcIik7XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY3JlYXRlLXBvcHVwXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUJ1dHRvblJlc2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgZWRpdENsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkUG9wdXBSZXNldEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2VQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1wb3B1cFwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCB0aXRsZUlucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgZGVzY3JpcHRpb25JbnB1dEZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZXNjcmlwdGlvblwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXRGaWVsZCA9IGNyZWF0ZUZvcm0ucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgbGlua0lucHV0RmllbGQgPSBjcmVhdGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjbGlua1wiKTtcclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlQ29uZmlnID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc2F2ZS1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b24tZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbiIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgZWRpdEJ1dHRvbixcclxuICBhZGRCdXR0b24sXHJcbiAgZWRpdEZvcm0sXHJcbiAgdmFsaWRhdGVDb25maWcsXHJcbiAgdGl0bGVJbnB1dEZpZWxkLFxyXG4gIGRlc2NyaXB0aW9uSW5wdXRGaWVsZCxcclxuICBjcmVhdGVGb3JtLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbi8vIFdyYXBwZXJzXHJcblxyXG4vL2NyZWF0ZXMgdHdvIGluc3RhbmNlcyBvZiB0aGUgRm9ybVZhbGlkYXRvciBjbGFzcyBhbmQgZW5hYmxlcyB2YWxpZGF0aW9uIG9uIHR3byBIVE1MIGZvcm0gZWxlbWVudHMsXHJcbi8vYWRkRm9ybUVsZW1lbnQgYW5kIGVkaXRGb3JtRWxlbWVudCwgcmVzcGVjdGl2ZWx5LlxyXG5cclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0ZUNvbmZpZywgZWRpdEZvcm0pO1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGVDb25maWcsIGNyZWF0ZUZvcm0pO1xyXG5cclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IG5ld1BvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoeyBwb3B1cFNlbGVjdG9yOiBcIi5wcmV2aWV3LXBvcHVwXCIgfSk7XHJcbm5ld1BvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoY2FyZERhdGEpID0+IHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgKGRhdGEpID0+IHtcclxuICAgIG5ld1BvcHVwSW1hZ2Uub3Blbk1vZGFsV2luZG93KGRhdGEpO1xyXG4gIH0pO1xyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufTtcclxuXHJcbmNvbnN0IG5ld0NhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgeyBpdGVtczogaW5pdGlhbENhcmRzLCByZW5kZXJlcjogY3JlYXRlQ2FyZCB9LFxyXG4gIFwiLnBob3RvLWdyaWRfX2NhcmRzXCJcclxuKTtcclxubmV3Q2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbmNvbnN0IG5ld1Byb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3Byb2ZpbGUtcG9wdXBcIiwgKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgbmV3VXNlckluZm8uc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMudGl0bGUsIGlucHV0VmFsdWVzLmRlc2NyaXB0aW9uKTtcclxufSk7XHJcblxyXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNjcmVhdGUtcG9wdXBcIiwgKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoeyBuYW1lOiBpbnB1dFZhbHVlcy5uYW1lLCBsaW5rOiBpbnB1dFZhbHVlcy5saW5rIH0pO1xyXG4gIG5ld0NhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XHJcbn0pO1xyXG5cclxuY29uc3QgbmV3VXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG59KTtcclxuXHJcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5uZXdQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIG5ld0NhcmRQb3B1cC5vcGVuTW9kYWxXaW5kb3coKTtcclxuICBhZGRGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxufSk7XHJcblxyXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgbmV3UHJvZmlsZVBvcHVwLm9wZW5Nb2RhbFdpbmRvdygpO1xyXG5cclxuICBjb25zdCB1c2VyRGF0YSA9IG5ld1VzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgdGl0bGVJbnB1dEZpZWxkLnZhbHVlID0gdXNlckRhdGEubmFtZTtcclxuICBkZXNjcmlwdGlvbklucHV0RmllbGQudmFsdWUgPSB1c2VyRGF0YS5kZXNjcmlwdGlvbjtcclxufSk7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgb3Blbk1vZGFsV2luZG93KHsgbGluaywgbmFtZSB9KSB7XHJcbiAgICBjb25zdCBpbWFnZU9wZW4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcHJldmlldy1pbWFnZVwiKTtcclxuICAgIGNvbnN0IGltYWdlVGV4dCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19wcmV2aWV3LW5hbWVcIik7XHJcbiAgICBpbWFnZU9wZW4uc3JjID0gbGluaztcclxuICAgIGltYWdlVGV4dC5hbHQgPSBuYW1lO1xyXG4gICAgaW1hZ2VUZXh0LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHN1cGVyLm9wZW5Nb2RhbFdpbmRvdygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICAgIHRoaXMuYWRkSXRlbShlbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgdXNlckRhdGEgPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgICByZXR1cm4gdXNlckRhdGE7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhuYW1lLCBqb2IpIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInZhbGlkYXRpb25Db25maWciLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfZm9ybSIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9pbnB1dExpc3QiLCJfYnV0dG9uRWxlbWVudCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfZXJyb3JFbGVtZW50IiwicmVtb3ZlIiwiX3RvZ2dsZUlucHV0RXJyb3IiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJkaXNhYmxlU3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfZW5hYmxlU3VibWl0QnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJfdGV4dCIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9lbGVtZW50IiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwidG9nZ2xlIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsImNhcmRJbWFnZSIsImNhcmRUZXh0Iiwic3JjIiwiYWx0IiwiUG9wdXAiLCJfcmVmIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuTW9kYWxXaW5kb3ciLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZU1vZGFsV2luZG93IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwibWF0Y2hlcyIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRDYWxsYmFjayIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9zdWJtaXRDYWxsYmFjayIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0cyIsImlucHV0T2JqZWN0IiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwiZWRpdEZvcm0iLCJjcmVhdGVGb3JtIiwiZWRpdEJ1dHRvbiIsImFkZEJ1dHRvbiIsInRpdGxlSW5wdXRGaWVsZCIsImRlc2NyaXB0aW9uSW5wdXRGaWVsZCIsInZhbGlkYXRlQ29uZmlnIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsIm5ld1BvcHVwSW1hZ2UiLCJpbWFnZU9wZW4iLCJpbWFnZVRleHQiLCJjcmVhdGVDYXJkIiwiY2FyZERhdGEiLCJuZXdDYXJkU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJlbGVtZW50IiwiYWRkSXRlbSIsInByZXBlbmQiLCJuZXdQcm9maWxlUG9wdXAiLCJpbnB1dFZhbHVlcyIsIm5ld1VzZXJJbmZvIiwic2V0VXNlckluZm8iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwibmV3Q2FyZFBvcHVwIiwiY2FyZCIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImpvYiIsInVzZXJEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==